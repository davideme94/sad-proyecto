<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Secretaría de Asuntos Docentes — Búsqueda de Resoluciones</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <!-- Toasts -->
  <div class="toasts" id="toasts"></div>

  <!-- Header -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <img src="images/sad-logo.JPG" alt="Logo SAD" class="logo" onerror="this.style.display='none'">
      <div class="titulo">Secretaría de Asuntos Docentes de José C. Paz — Búsqueda de Resoluciones</div>
    </div>
  </header>

  <!-- Main -->
  <main role="main">
    <div class="wrap">
      <!-- Buscador público -->
      <div class="card">
        <h2>Buscar por DNI</h2>
        <div class="row">
          <input id="dni" placeholder="Ingrese su DNI" inputmode="numeric" />
          <button id="btnBuscar">Buscar</button>
        </div>
        <div id="resultado" class="resultado"></div>
      </div>

      <!-- Panel Admin -->
      <div class="card">
        <div class="panel">
          <h3 class="panel-title">Panel Admin</h3>
          <span class="badge" id="authBadge">No conectado</span>
          <div class="panel-actions">
            <button id="btnLogin" type="button">Login</button>
            <button id="btnLogout" type="button" class="btn-plain" style="display:none">Salir</button>
          </div>
        </div>

        <div id="adminPanel" style="display:none; margin-top:12px">
          <!-- DOCENTE -->
          <h4 class="section-title">Docente</h4>
          <div class="grid">
            <input id="docNombre" placeholder="Nombre docente" />
            <input id="docDni" placeholder="DNI docente" />
          </div>
          <div class="actions" style="margin-top:8px">
            <button id="btnGuardarDoc">Guardar/Actualizar</button>
            <span id="statusDoc" class="muted"></span>
            <button id="btnListDoc" class="btn-plain">Ver docentes</button>
          </div>

          <!-- CARGA MASIVA DOCENTES -->
          <h4 class="section-title">Carga masiva de docentes (dos columnas con vista previa)</h4>
          <div class="grid-3">
            <div>
              <div class="muted" style="margin-bottom:6px">Nombres — una por línea</div>
              <textarea id="massNames" rows="8" placeholder="Ej:
BALMACEDA VERONICA GRACIELA
PEREZ JUAN
LOPEZ MARIA"></textarea>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">DNIs — una por línea (se ignoran puntos/espacios)</div>
              <textarea id="massDnis" rows="8" placeholder="Ej:
17142116
12345678
23456789"></textarea>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">Acciones</div>
              <div class="actions" style="margin-top:4px; flex-direction:column; align-items:flex-start">
                <button id="btnMassPreview">Previsualizar</button>
                <button id="btnMassSave" class="btn-plain" disabled>Guardar todos</button>
                <span id="massStatus" class="muted"></span>
              </div>
            </div>
          </div>
          <div id="massPreview" style="margin-top:10px"></div>

          <!-- RESOLUCIÓN -->
          <h4 class="section-title">Resolución</h4>
          <div class="grid">
            <input id="titulo" placeholder="Título/Descripción" />
            <input id="driveUrl" placeholder="URL pública de Google (Drive/Docs)" />
            <input id="expediente" placeholder="Expediente (opcional)" />
            <input id="numero" placeholder="N° de resolución (opcional)" />
            <select id="nivel" aria-label="Nivel">
              <option value="">Nivel (opcional)</option>
              <option>INICIAL</option>
              <option>PRIMARIA</option>
              <option>SECUNDARIA</option>
              <option>TECNICA</option>
              <option>EDUC. FISICA</option>
              <option>ARTISTICA</option>
              <option>PSICOLOGIA</option>
              <option>ADULTOS Y CENS</option>
            </select>
          </div>
          <div class="actions" style="margin-top:8px">
            <button id="btnCrearRes">Crear</button>
            <span id="statusRes" class="muted"></span>
            <button id="btnListRes" class="btn-plain">Ver resoluciones</button>
            <button id="btnListAcuses" class="btn-plain">Ver acuses</button>
          </div>

          <!-- VINCULAR (autocomplete + chips) -->
          <h4 class="section-title">Vincular resolución a docentes (muchos a muchos)</h4>
          <div class="grid-3">
            <div class="sugs">
              <input id="resBuscar" placeholder="Buscar resolución por título" aria-autocomplete="list" />
              <div id="resSug" class="sugs-list" style="display:none"></div>
              <div class="chips"><span id="resSel" class="chip" style="display:none"></span></div>
            </div>
            <div class="sugs">
              <input id="docBuscar" placeholder="Buscar docente por nombre" aria-autocomplete="list" />
              <div id="docSug" class="sugs-list" style="display:none"></div>
              <div id="docSel" class="chips"></div>
            </div>
            <div class="actions">
              <button id="btnVincular" title="Crea vínculos sin duplicar">Vincular</button>
              <button id="btnVerVinculos" class="btn-plain">Ver vínculos</button>
            </div>
          </div>

          <!-- NUEVO: Vincular por lista de DNIs -->
          <h4 class="section-title">Vincular por lista de DNIs</h4>
          <div class="grid-3">
            <div>
              <div class="muted" style="margin-bottom:6px">Pegá DNIs — uno por línea</div>
              <textarea id="dnilist" rows="8" placeholder="Ej:
17142116
23456789
30123456"></textarea>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">Acciones</div>
              <div class="actions" style="flex-direction:column; align-items:flex-start">
                <button id="btnDniPreview">Previsualizar DNIs</button>
                <button id="btnDniVincular" class="btn-plain" disabled>Vincular lista</button>
              </div>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">Vista previa</div>
              <div id="dniPreview"></div>
            </div>
          </div>

          <!-- LISTAS dinámicas -->
          <div id="adminLista" style="margin-top:12px"></div>
        </div>
      </div>
    </div>
  </main>

  <!-- FooterBar -->
  <div class="footerBar" role="contentinfo">
    <div class="footerBar-msg">
      Por omisiones/errores o cualquier consulta, puede mandar un email a
      <a href="mailto:sadresoluciones132@gmail.com">sadresoluciones132@gmail.com</a>.
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">© 2025 Secretaría de Asuntos Docentes de José C. Paz. Todos los derechos reservados.</footer>

  <!-- MODAL LOGIN -->
  <div id="loginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="loginTitle" style="display:none">
    <div class="box">
      <h3 id="loginTitle" class="modal-title">Ingreso Administrador</h3>
      <div class="modal-body">
        <input id="loginEmail" placeholder="Email" />
        <input id="loginPass" type="password" placeholder="Contraseña" />
        <div id="loginError" class="danger" style="display:none; font-size:14px;"></div>
        <div class="modal-actions">
          <button id="btnLoginCancel" type="button" class="btn-plain">Cancelar</button>
          <button id="btnLoginSubmit" type="button">Entrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="/app.js" defer></script>
</body>
</html>
